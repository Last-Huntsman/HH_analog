<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Vacancies</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<h1>Vacancies</h1>

<!-- Форма поиска -->
<form class="row mb-3" method="get" th:action="@{/view/vacancy}">
    <div class="col-md-3">
        <input type="text" class="form-control" name="post" placeholder="Поиск по должности"
               th:value="${post}">
    </div>
    <div class="col-md-3">
        <input type="text" class="form-control" name="employer" placeholder="Поиск по компании"
               th:value="${employer}">
    </div>
    <div class="col-md-2">
        <input type="number" class="form-control" name="minSalary" placeholder="Зарплата от"
               th:value="${minSalary}">
    </div>
    <div class="col-md-2">
        <select class="form-select" name="sort">
            <option value="post" th:selected="${sort=='post'}">По должности</option>
            <option value="salary" th:selected="${sort=='salary'}">По зарплате</option>
            <option value="employer.name" th:selected="${sort=='employer.name'}">По компании</option>
        </select>
    </div>
    <div class="col-md-2">
        <select class="form-select" name="dir">
            <option value="asc" th:selected="${dir=='asc'}">Возрастание</option>
            <option value="desc" th:selected="${dir=='desc'}">Убывание</option>
        </select>
    </div>
    <div class="col-md-12 mt-2">
        <button class="btn btn-primary">Применить</button>
    </div>
</form>

<!-- Таблица -->
<table class="table table-striped">
    <thead>
    <tr>
        <th>ID</th>
        <th>Компания</th>
        <th>Post</th>
        <th>Salary</th>
        <th>Active</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="vacancy : ${vacancies}">
        <td th:text="${vacancy.id}"></td>
        <td th:text="${vacancy.employer.name}"></td>
        <td th:text="${vacancy.post}"></td>
        <td th:text="${vacancy.salary}"></td>
        <td th:text="${vacancy.active}"></td>
    </tr>
    </tbody>
</table>

<!-- Пагинация -->
<nav th:if="${page.totalPages > 1}">
    <ul class="pagination">
        <li class="page-item" th:classappend="${page.first}? 'disabled'">
            <a class="page-link"
               th:href="@{/view/vacancy(page=${page.number - 1}, size=${page.size},
                                        post=${post}, employer=${employer}, minSalary=${minSalary},
                                        sort=${sort}, dir=${dir})}">Previous</a>
        </li>
        <li th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}"
            class="page-item" th:classappend="${i == page.number}? 'active'">
            <a class="page-link" th:text="${i + 1}"
               th:href="@{/view/vacancy(page=${i}, size=${page.size},
                                        post=${post}, employer=${employer}, minSalary=${minSalary},
                                        sort=${sort}, dir=${dir})}"></a>
        </li>
        <li class="page-item" th:classappend="${page.last}? 'disabled'">
            <a class="page-link"
               th:href="@{/view/vacancy(page=${page.number + 1}, size=${page.size},
                                        post=${post}, employer=${employer}, minSalary=${minSalary},
                                        sort=${sort}, dir=${dir})}">Next</a>
        </li>
    </ul>
</nav>

</body>
</html>
